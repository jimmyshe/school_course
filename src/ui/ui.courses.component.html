<h2>Courses</h2>

<!--<h3>Current filters</h3>-->
<!--<p *ngFor="let f of filters">{{f}}</p>-->


    <table style="width:100%">
        <tr>
            <th>Cureent filters</th>
        </tr>
        <tr *ngFor="let f of filters">{{f}}</tr>
    </table>



<button type="button" class="btn btn-default" (click)="deleteFilters()">empty all filters</button>

<h4>Create new filter</h4>
    <label for="filter_type">Select new filter type </label>
    <select class="form-control"  id="filter_type"
            required
            [(ngModel)]="filterType" name="logic">
        <option *ngFor="let p of filter_typeList" [value]="p">{{p}}</option>
    </select>

    <div [hidden]="!filterType">
        <p>{{filterType}}</p>
        <div *ngIf="filterType=='Section size'">
            <label for="cpk">choose comparison key </label>
            <select  class="form-control"  id="cpk"
                    required
                    [(ngModel)]="comparisonKey" name="cpk">
                <option *ngFor="let p of comparisonKeyList" [value]="p">{{p}}</option>
            </select>
            <label for="c_value">enter value</label>
            <input type="NUMBER" class="form-control" id="c_value"
                   required
                   [(ngModel)]="comparisonValue" name="c_value">
        </div>
        <div *ngIf="filterType!='Section size'">
            <label for="c_value">enter value</label>
            <input type="text" class="form-control" id="ct_value"
                   required
                   [(ngModel)]="comparisonValue" name="ct_value">
        </div>
        <div>
            <button type="button" class="btn btn-default" (click)="addFilter()">add a filter</button>
        </div>
    </div>

<h3>Find</h3>
<form class="courses_query" (ngSubmit)="find()" #siteForm="ngForm">
    <label for="logic">Logical relation between all the filters </label>
    <select class="form-control"  id="logic"
            required
            [(ngModel)]="logicConnection" name="logic">
        <option *ngFor="let p of logocalConnectionList" [value]="p">{{p}}</option>
    </select>
    <p>search for courses instead of sections?</p>
    <label class="switch" for="isCourses">
        <input type="checkbox"  id="isCourses"
            [(ngModel)]="isCourses" name="isCourses"
        >
        <div class="slider round"></div>
    </label>

    <div [hidden] = "!isCourses">
        <!--<h4>Current order key, ranked from high to low</h4>-->
        <!--<p *ngFor="let f of orderList">{{f}}</p>-->

        <table style="width:100%">
            <tr>
                <th>Current order key, ranked from high to low</th>
            </tr>
            <tr *ngFor="let f of orderList">{{f}}</tr>
        </table>


        <select class="form-control"  id="order"
                [(ngModel)]="order" name="order">
            <option *ngFor="let p of orderKeyList" [value]="p">{{p}}</option>
        </select>
        <button type="button" (click)="addOrder()">add order</button>
        <button type="button" (click)="deleteOrder()">delete orders</button>
    </div>

    <button type="submit" class="btn btn-default" [disabled]="!siteForm.form.valid">find</button>
</form>

<div [hidden] = "!found">
    <h3>Your result:</h3>

    <div *ngIf="result == 'wait...'">
        <p>{{ret_str}}</p>
    </div>
    <div *ngIf="result != 'wait...'">
        <table style="width:100%">
            <tr>
                <th *ngFor="let tab of col">{{tab}}</th>
            </tr>
            <tr *ngFor="let row of result">
                <th *ngFor="let tab of col">{{row[tab]}}</th>
            </tr>
        </table>
    </div>




</div>